<#include "../../include/header.html">
  <link rel="stylesheet" href="../../lib/jointJS/joint.css"/>
  <script src="../../lib/jointJS/lodash.min.js"></script>
  <script src="../../lib/jointJS/backbone-min.js"></script>
  <script src="../../lib/jointJS/joint.js"></script>
  <script src="../../resources/js/dispatch/config/module.js"></script>
  <script src="../../resources/js/dispatch/controller/workflow/workflowCreateController.js"></script>
  <script src="../../resources/js/dispatch/service/workflow/workflowService.js"></script>
  <body ng-app="dispatch" ng-controller="workflowCreateController as vm">
  <div id="content-container">
    <div kendo-window="vm.jobWindow" k-title="'添加Job'" k-width="600" k-on-open="vm.jobWindow.visible = true"
         k-on-close="vm.jobWindow.visible = false" k-visible="false">
      <div class="form-horizontal" style="width:100%">
        <div class="col-sm-10">
          <div class="form-group">
            <label class="col-sm-2 control-label">Job名称</label>
            <div class="col-sm-8">
              <input type="text" ng-model="vm.newJob.name" class="k-textbox col-sm-12"/>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">主题</label>
            <div class="col-sm-8 ">
              <select class="col-sm-12"
                      ng-model="vm.newJob.themeId"
                      kendo-drop-down-list
                      k-data-text-field="'themeName'"
                      k-data-value-field="'themeId'"
                      k-data-source="vm.themes" style="padding-left:0;padding-right:0"></select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">层次</label>
            <div class="col-sm-8 ">
              <select class="col-sm-12"
                      ng-model="vm.newJob.layerId"
                      kendo-drop-down-list
                      k-data-text-field="'layerName'"
                      k-data-value-field="'layerId'"
                      k-data-source="vm.jobLayers" style="padding-left:0;padding-right:0"></select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">源job</label>
            <div class="col-sm-8 ">
              <select class="col-sm-12"
                      kendo-drop-down-list
                      ng-model="vm.newJob.jobSource"
                      k-data-text-field="'jobName'"
                      k-data-value-field="'jobId'"
                      k-data-source="vm.jobSources" style="padding-left:0;padding-right:0"></select>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2">
              <button class="k-button" ng-click="vm.createJob()">确认</button>
              <button class="k-button" ng-click="vm.resetWindow()">取消</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="theme-content">
      <div class="panel">
        <div class="row form-horizontal">
          <div class="panel-body col-sm-offset-0">
            <div class="col-sm-4">
              <div class="form-group">
                <label class="col-sm-4 control-label">主题</label>
                <div class="col-sm-8 ">
                  <select class="col-sm-12"
                          ng-model="vm.workflow.themeId"
                          kendo-drop-down-list
                          k-data-text-field="'themeName'"
                          k-data-value-field="'themeId'"
                          k-data-source="vm.themes" style="padding-left:0;padding-right:0"></select>
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group">
                <label class="col-sm-4 control-label">层次</label>
                <div class="col-sm-8 ">
                  <select class="col-sm-12"
                          ng-model="vm.workflow.layerId"
                          kendo-drop-down-list
                          k-data-text-field="'layerName'"
                          k-data-value-field="'layerId'"
                          k-data-source="vm.layers" style="padding-left:0;padding-right:0"></select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row form-horizontal">
          <div class="panel-body col-sm-offset-0">
            <div class="col-sm-4">
              <div class="form-group">
                <label class="col-sm-4 control-label">工作流名称</label>
                <div class="col-sm-8 ">
                  <input class="col-sm-12 k-textbox" type="text">
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group">
                <label class="col-sm-4 control-label">工作流描述</label>
                <div class="col-sm-8 ">
                  <input class="col-sm-12 k-textbox" type="text">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="panel">
        <div class="panel-body col-sm-offset-0">
          <div class="row">
            <button class="k-button" ng-click="vm.jobWindow.center().open()">添加Job</button>
            <button class="k-button" ng-click="vm.deleteJob()">删除</button>
            <button class="k-button" ng-click="vm.save()">保存</button>
            <button class="k-button">生成</button>
          </div>
        </div>
        <div class="panel-body col-sm-offset-0">
          <div id="graph"></div>
        </div>
      </div>
    </div>
  </div>
  </div>
  </body>
  </html>